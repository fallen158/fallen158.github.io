<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  
  <title>记昨日书</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  
    <meta name="author" content="敢看破不敢在乎">
  
  
    <meta name="description" content="利用node.js编写一个简单的server服务器 服务器分为硬件服务器，和软件服务器。

硬件服务器就是:
软件服务器你已经有了，你使用的电脑就是服务器。
但是你还没有提供 HTTP 服务的「程序」。
用脚本就可以提供 HTTP 服务，不管是 Bash 脚本还是 Node.js 脚本都可以。今天我们就是用node.就是实现提供HTTP服务。

Node.js编写服务器请求

打开命令行，新建一个">
  
  <meta name="description" content="利用node.js编写一个简单的server服务器 服务器分为硬件服务器，和软件服务器。  硬件服务器就是: 软件服务器你已经有了，你使用的电脑就是服务器。 但是你还没有提供 HTTP 服务的「程序」。 用脚本就可以提供 HTTP 服务，不管是 Bash 脚本还是 Node.js 脚本都可以。今天我们就是用node.就是实现提供HTTP服务。  Node.js编写服务器请求  打开命令行，新建一个">
<meta property="og:type" content="article">
<meta property="og:title" content="记昨日书">
<meta property="og:url" content="http://yoursite.com/2018/04/12/编写一个server服务器/index.html">
<meta property="og:site_name" content="记昨日书">
<meta property="og:description" content="利用node.js编写一个简单的server服务器 服务器分为硬件服务器，和软件服务器。  硬件服务器就是: 软件服务器你已经有了，你使用的电脑就是服务器。 但是你还没有提供 HTTP 服务的「程序」。 用脚本就可以提供 HTTP 服务，不管是 Bash 脚本还是 Node.js 脚本都可以。今天我们就是用node.就是实现提供HTTP服务。  Node.js编写服务器请求  打开命令行，新建一个">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://img.blog.csdn.net/20180412085144334?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd2VpeGluXzQxOTY3OTAx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20180412091751366?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd2VpeGluXzQxOTY3OTAx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20180412095604912?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd2VpeGluXzQxOTY3OTAx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20180412093027292?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd2VpeGluXzQxOTY3OTAx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:updated_time" content="2018-04-12T01:56:42.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="记昨日书">
<meta name="twitter:description" content="利用node.js编写一个简单的server服务器 服务器分为硬件服务器，和软件服务器。  硬件服务器就是: 软件服务器你已经有了，你使用的电脑就是服务器。 但是你还没有提供 HTTP 服务的「程序」。 用脚本就可以提供 HTTP 服务，不管是 Bash 脚本还是 Node.js 脚本都可以。今天我们就是用node.就是实现提供HTTP服务。  Node.js编写服务器请求  打开命令行，新建一个">
<meta name="twitter:image" content="http://img.blog.csdn.net/20180412085144334?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd2VpeGluXzQxOTY3OTAx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
  
  
  <link rel="stylesheet" href="/css/style.css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>

<body>
  <div class="wrapper">
    <header id="header">
  <div class="title">
    <h1><a href="/">记昨日书</a></h1>
    <p><a href="/"></a></p>
  </div>
  <nav class="nav">
    <ul>
      
        <li><a href="/archives">Archives</a></li>
      
        <li><a href="/reading">Reading</a></li>
      
        <li><a href="/about">About</a></li>
      
      
    </ul>
    <div class="clearfix"></div>
  </nav>
  <div class="clearfix"></div>
</header>
    <div class="content"><article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2018/04/12/编写一个server服务器/">
  <time datetime="2018-04-12T01:35:22.000Z">
    2018-04-12
  </time>
</a>
    
    
  
    <h1 class="title"></h1>
  

  </header>
  
  <div class="entry">
    
      <h1 id="利用node-js编写一个简单的server服务器"><a href="#利用node-js编写一个简单的server服务器" class="headerlink" title="利用node.js编写一个简单的server服务器"></a>利用node.js编写一个简单的server服务器</h1><p> <strong>服务器分为硬件服务器，和软件服务器。</strong></p>
<ul>
<li>硬件服务器就是:<br><img src="http://img.blog.csdn.net/20180412085144334?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd2VpeGluXzQxOTY3OTAx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="硬件服务器"></li>
<li>软件服务器你已经有了，你使用的电脑就是服务器。</li>
<li>但是你还没有提供 HTTP 服务的「程序」。</li>
<li>用脚本就可以提供 HTTP 服务，不管是 Bash 脚本还是 Node.js 脚本都可以。今天我们就是用node.就是实现提供HTTP服务。</li>
</ul>
<p><strong>Node.js编写服务器请求</strong></p>
<ul>
<li>打开命令行，新建一个目录，进入目录：mkdir  node-demo；cd  node-demo</li>
<li>编写一个js后缀的文件：touch server.js</li>
<li>使用vi ，open 或编译器编译server.js：</li>
<li><p>var http = require(‘http’)<br> var fs = require(‘fs’)<br> var url = require(‘url’)<br> var port = process.argv[2]</p>
<p> if(!port){</p>
<pre><code>console.log(&apos;请指定端口号好不啦？\nnode server.js 8888 这样不会吗？&apos;)
process.exit(1)
</code></pre><p>}</p>
<p>var server = http.createServer(function(request, response){<br>var parsedUrl = url.parse(request.url, true)<br>var path = request.url<br>var query = ‘’<br>if(path.indexOf(‘?’) &gt;= 0){ query = path.substring(path.indexOf(‘?’)) }<br>var pathNoQuery = parsedUrl.pathname<br>var queryObject = parsedUrl.query<br>var method = request.method</p>
<p>/<strong><em>**</em></strong> 从这里开始看，上面不要看 <strong><strong><em>**</em></strong></strong>/</p>
</li>
</ul>
<p>  console.log(‘得到 HTTP 路径\n’ + path)</p>
<p>  /<strong><em>**</em></strong> 代码结束，下面不用看 <strong><strong><em>**</em></strong></strong>/<br> })</p>
<p> server.listen(port)<br> console.log(‘监听 ‘ + port + ‘ 成功\n请用在空中转体720度然后用电饭煲打开 <a href="http://localhost:&#39;" target="_blank" rel="noopener">http://localhost:&#39;</a> + port)</p>
<ul>
<li>编写完成后，运行node server.js.  看到报错,根据报错调整你的命令，加一个端口，例如 node server.js  8888</li>
<li>成功之后，这个 server 会保持运行，无法退出，如果你想中断这个server，救赎如 ctrl+c，中断后你才能输入其他命令</li>
<li>然后新开一个命令行输入curl -s -v <a href="http://localhost:8888/xxxx" target="_blank" rel="noopener">http://localhost:8888/xxxx</a>    你的服务器就会得到 <img src="http://img.blog.csdn.net/20180412091751366?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd2VpeGluXzQxOTY3OTAx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="服务器后台"></li>
</ul>
<p><strong>一个简单的服务器就完成啦，不过</strong></p>
<ul>
<li>这个服务器目前只有一个功能，那就是打印出路径和查询字符串</li>
<li>还缺少一个重要的功能，那就是发出 HTTP 响应</li>
</ul>
<p><strong>服务响应</strong></p>
<ul>
<li>编辑 server.js</li>
<li>在中间我标注的区域添加两行代码：</li>
<li>response.write(‘Hi\n’)</li>
<li>response.end()</li>
<li>中断之前的 server，重新运行 node server 8888</li>
<li>curl <a href="http://127.0.0.1:8888/xxx，结果如下：" target="_blank" rel="noopener">http://127.0.0.1:8888/xxx，结果如下：</a></li>
<li>Hi</li>
<li>好了，响应添加成功</li>
<li>使用 curl -s -v – “<a href="http://localhost:8888/xxx&quot;" target="_blank" rel="noopener">http://localhost:8888/xxx&quot;</a> 可以查看完整的请求和响应。</li>
</ul>
<p>  <strong>我们还可以更改server文件的内容，得到一个html文件内容：</strong></p>
<ul>
<li>编辑server，中间那行</li>
<li><p>这是一个九宫格的代码：</p>
</li>
<li><p><img src="http://img.blog.csdn.net/20180412095604912?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd2VpeGluXzQxOTY3OTAx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
</li>
</ul>
<ul>
<li>（else if(path == ‘/‘) 就是网站输入/。就会得到九宫格页面，如果输入/，styele.css，main.js 以外的呢就会得到404报错。 这个可以根据自己的编写的页面调制。</li>
<li><p>‘ + ‘是换行的意思，命令必须这么输入，不然报错，页面什么也不显示 ）</p>
</li>
<li><p>编辑完成后，重新运行node server.js 8888</p>
</li>
<li><p>用网站打开，就会得到：htttp://127.0.0.1:8888/ 就会得到：<br><img src="http://img.blog.csdn.net/20180412093027292?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd2VpeGluXzQxOTY3OTAx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="网站显示页面"></p>
<p><strong>其中127.0.0.1呢就是本地ip，代表设备自己。8888。就是我们node 运行的端口啦。</strong></p>
</li>
</ul>

    
  </div>
  <footer>
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


<section id="comment">
  <h1 class="title">Comments</h1>
  <div class="ds-thread" data-title="">
  </div>
</section>
</div>
  </div>
  <footer id="footer"><div class="copyright">
  
  &copy; 2018 <a href="/">敢看破不敢在乎</a>
  
</div>
<div class="theme-copyright">
  Theme by <a href="https://github.com/orderedlist" target="_blank">orderedlist</a>
   | 
  Redesign by <a href="http://heroicyang.com/" target="_blank">Heroic Yang</a>
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
<script src="/js/scale.fix.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
  var duoshuoQuery = { short_name: 'buru' };
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';
    ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
  (function($){
    $('.fancybox').fancybox();
  })(jQuery);
</script>

</body>
</html>