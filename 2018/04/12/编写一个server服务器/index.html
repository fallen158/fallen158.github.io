<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>记昨日书</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  

  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/pure-min.css" type="text/css">
  <link rel="stylesheet" href="/css/biture.css" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  

</head>


<body>
  <header id="header">
    <div class="wrap">
  <div class="inner">
    <a class="brand" href="/">记昨日书</a>
    <a id="menu-toggle" href="#"><i class="fa fa-bars"></i></a>
<ul class="nav-menu">


    <li><a href="/">home</a></li>



  <li><a href="#">dropdown menu</a>
    <ul class="sub-menu">

      <li><a href="//google.com/">google</a></li>

      <li><a href="//yahoo.com/">yahoo</a></li>

    </ul>
  </li>


</ul>

<ul class="nav-menu ext-menu">


    <li><a href="//github.com/kywk/">github</a></li>



    <li><a href="//zespia.tw/hexo/">hexo</a></li>



  <li><a href="#">theme</a>
    <ul class="sub-menu">

      <li><a href="//github.com/kywk/hexo-theme-biture">biture</a></li>

      <li><a href="//github.com/tommy351/hexo-theme-landscape">landscape</a></li>

      <li><a href="//github.com/tommy351/hexo-theme-light">light</a></li>

    </ul>
  </li>


  <li><a class="various" href="#fbox-tagcloud">tags</a></li>
</ul>
</div>

  </div>
</div>

<div class="tagcloud" id="fbox-tagcloud" style="margin:10px; display:none; overflow: hidden"></div>

  </header>
  <div id="main-content" class="wrap">
  <div class="inner">
    <article class="post">
  <div class="pure-g">

    <!-- article: meta -->
    <div class="pure-u-1-12 article-meta">
      <div class="date"><time datetime="2018-04-12T01:35:22.000Z">
        <div class="day">12</div>
        <div class="month">Apr 2018</div>
      </time></div>
      <div class="article-tags">
        

      </div>
    </div>

    <!-- article: main -->
    <div class="pure-u-11-12">
      <header><div class="article-title">
        
  
    <h1 class="title"></h1>
  

      </div></header>
      <div class="article-entry">
        
          <h1 id="利用node-js编写一个简单的server服务器"><a href="#利用node-js编写一个简单的server服务器" class="headerlink" title="利用node.js编写一个简单的server服务器"></a>利用node.js编写一个简单的server服务器</h1><p> <strong>服务器分为硬件服务器，和软件服务器。</strong></p>
<ul>
<li>硬件服务器就是:<br><img src="http://img.blog.csdn.net/20180412085144334?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd2VpeGluXzQxOTY3OTAx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="硬件服务器"></li>
<li>软件服务器你已经有了，你使用的电脑就是服务器。</li>
<li>但是你还没有提供 HTTP 服务的「程序」。</li>
<li>用脚本就可以提供 HTTP 服务，不管是 Bash 脚本还是 Node.js 脚本都可以。今天我们就是用node.就是实现提供HTTP服务。</li>
</ul>
<p><strong>Node.js编写服务器请求</strong></p>
<ul>
<li>打开命令行，新建一个目录，进入目录：mkdir  node-demo；cd  node-demo</li>
<li>编写一个js后缀的文件：touch server.js</li>
<li>使用vi ，open 或编译器编译server.js：</li>
<li><p>var http = require(‘http’)<br> var fs = require(‘fs’)<br> var url = require(‘url’)<br> var port = process.argv[2]</p>
<p> if(!port){</p>
<pre><code>console.log(&apos;请指定端口号好不啦？\nnode server.js 8888 这样不会吗？&apos;)
process.exit(1)
</code></pre><p>}</p>
<p>var server = http.createServer(function(request, response){<br>var parsedUrl = url.parse(request.url, true)<br>var path = request.url<br>var query = ‘’<br>if(path.indexOf(‘?’) &gt;= 0){ query = path.substring(path.indexOf(‘?’)) }<br>var pathNoQuery = parsedUrl.pathname<br>var queryObject = parsedUrl.query<br>var method = request.method</p>
<p>/<strong><em>**</em></strong> 从这里开始看，上面不要看 <strong><strong><em>**</em></strong></strong>/</p>
</li>
</ul>
<p>  console.log(‘得到 HTTP 路径\n’ + path)</p>
<p>  /<strong><em>**</em></strong> 代码结束，下面不用看 <strong><strong><em>**</em></strong></strong>/<br> })</p>
<p> server.listen(port)<br> console.log(‘监听 ‘ + port + ‘ 成功\n请用在空中转体720度然后用电饭煲打开 <a href="http://localhost:&#39;" target="_blank" rel="noopener">http://localhost:&#39;</a> + port)</p>
<ul>
<li>编写完成后，运行node server.js.  看到报错,根据报错调整你的命令，加一个端口，例如 node server.js  8888</li>
<li>成功之后，这个 server 会保持运行，无法退出，如果你想中断这个server，救赎如 ctrl+c，中断后你才能输入其他命令</li>
<li>然后新开一个命令行输入curl -s -v <a href="http://localhost:8888/xxxx" target="_blank" rel="noopener">http://localhost:8888/xxxx</a>    你的服务器就会得到 <img src="http://img.blog.csdn.net/20180412091751366?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd2VpeGluXzQxOTY3OTAx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="服务器后台"></li>
</ul>
<p><strong>一个简单的服务器就完成啦，不过</strong></p>
<ul>
<li>这个服务器目前只有一个功能，那就是打印出路径和查询字符串</li>
<li>还缺少一个重要的功能，那就是发出 HTTP 响应</li>
</ul>
<p><strong>服务响应</strong></p>
<ul>
<li>编辑 server.js</li>
<li>在中间我标注的区域添加两行代码：</li>
<li>response.write(‘Hi\n’)</li>
<li>response.end()</li>
<li>中断之前的 server，重新运行 node server 8888</li>
<li>curl <a href="http://127.0.0.1:8888/xxx，结果如下：" target="_blank" rel="noopener">http://127.0.0.1:8888/xxx，结果如下：</a></li>
<li>Hi</li>
<li>好了，响应添加成功</li>
<li>使用 curl -s -v – “<a href="http://localhost:8888/xxx&quot;" target="_blank" rel="noopener">http://localhost:8888/xxx&quot;</a> 可以查看完整的请求和响应。</li>
</ul>
<p>  <strong>我们还可以更改server文件的内容，得到一个html文件内容：</strong></p>
<ul>
<li>编辑server，中间那行</li>
<li><p>这是一个九宫格的代码：</p>
</li>
<li><p><img src="http://img.blog.csdn.net/20180412095604912?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd2VpeGluXzQxOTY3OTAx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
</li>
</ul>
<ul>
<li>（else if(path == ‘/‘) 就是网站输入/。就会得到九宫格页面，如果输入/，styele.css，main.js 以外的呢就会得到404报错。 这个可以根据自己的编写的页面调制。</li>
<li><p>‘ + ‘是换行的意思，命令必须这么输入，不然报错，页面什么也不显示 ）</p>
</li>
<li><p>编辑完成后，重新运行node server.js 8888</p>
</li>
<li><p>用网站打开，就会得到：htttp://127.0.0.1:8888/ 就会得到：<br><img src="http://img.blog.csdn.net/20180412093027292?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd2VpeGluXzQxOTY3OTAx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="网站显示页面"></p>
<p><strong>其中127.0.0.1呢就是本地ip，代表设备自己。8888。就是我们node 运行的端口啦。</strong></p>
</li>
</ul>

        
      </div>
      <footer><div class="article-comment">
        
<section id="comment">
  <h1 class="title">comment</h1>

  
</section>


      </div></footer>
    </div>
  </div>
</article>

  </div>
  </div>
  <footer id="footer">
    <div class="wrap">
  <div class="inner" style="text-align: center">
    
    &copy; 2018 敢看破不敢在乎 All Rights Reserved
    

    / <a href="https://github.com/kywk/hexo-theme-biture">biture</a> for <a href="http://zespia.tw/hexo/">hexo</a>
    / developed by <a href="http://kywk.github.io/moco/">MooCow (kywk)</a>.
  </div>
</div>

  </footer>
<!-- Le javascript -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>


<!-- Responsive menu -->
<script>
$(document).ready(function() {
  $("#menu-toggle").click(function(event) {
    event.preventDefault();
    if ($(this).hasClass("isShow")) {
      $("#header").css({position: "fixed"});
      $("ul.nav-menu").hide();
      $(this).removeClass("isShow");
    } else {
      $("#header").css({position: "static"});
      $("ul.nav-menu").show();
      $("html, body").scrollTop(0);
      $(this).addClass("isShow");
    }
    return false;
  });

  $(window).resize(function() {
    if ($(window).width() > 700) {
      $("ul.nav-menu").removeAttr('style');
    }
  });

});
</script>






<link rel="stylesheet" href="/package/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="/package/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<script type="text/javascript">
(function($){
  $(".fancybox").fancybox();
  $(".various").fancybox({
    maxWidth  : 800,
    maxHeight : 600,
    fitToView : false,
    width   : '70%',
    height    : '70%',
    autoSize  : true,
    closeClick  : false,
    openEffect  : 'none',
    closeEffect : 'none'
  });
})(jQuery);
</script>


</body>
</html>
